<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=cGvuclDC_Z1vE_cnVEU6AT_gOQZkhM0SBTdk8N4v3T_HUEn3hHzgUzs9hFMYxlVuOGl08VIISs6qzeyrLBHojg');ul.lst-kix_akdjis5omncr-0{list-style-type:none}ul.lst-kix_akdjis5omncr-1{list-style-type:none}ul.lst-kix_akdjis5omncr-2{list-style-type:none}.lst-kix_3g3h5y526gvs-0>li:before{content:"\0025cf  "}ul.lst-kix_akdjis5omncr-3{list-style-type:none}ul.lst-kix_akdjis5omncr-4{list-style-type:none}ul.lst-kix_akdjis5omncr-5{list-style-type:none}ul.lst-kix_akdjis5omncr-6{list-style-type:none}ul.lst-kix_akdjis5omncr-7{list-style-type:none}ul.lst-kix_akdjis5omncr-8{list-style-type:none}.lst-kix_ihy7hfh3ag55-3>li:before{content:"\0025cf  "}ul.lst-kix_3g3h5y526gvs-7{list-style-type:none}.lst-kix_ihy7hfh3ag55-1>li:before{content:"\0025cb  "}.lst-kix_ihy7hfh3ag55-2>li:before{content:"\0025a0  "}.lst-kix_3g3h5y526gvs-5>li:before{content:"\0025a0  "}.lst-kix_3g3h5y526gvs-6>li:before{content:"\0025cf  "}ul.lst-kix_3g3h5y526gvs-8{list-style-type:none}ul.lst-kix_3g3h5y526gvs-5{list-style-type:none}ul.lst-kix_ihy7hfh3ag55-0{list-style-type:none}ul.lst-kix_3g3h5y526gvs-6{list-style-type:none}ul.lst-kix_ihy7hfh3ag55-1{list-style-type:none}ul.lst-kix_3g3h5y526gvs-3{list-style-type:none}.lst-kix_ihy7hfh3ag55-0>li:before{content:"\0025cf  "}ul.lst-kix_ihy7hfh3ag55-2{list-style-type:none}.lst-kix_3g3h5y526gvs-4>li:before{content:"\0025cb  "}ul.lst-kix_3g3h5y526gvs-4{list-style-type:none}.lst-kix_3g3h5y526gvs-8>li:before{content:"\0025a0  "}ul.lst-kix_ihy7hfh3ag55-3{list-style-type:none}ul.lst-kix_3g3h5y526gvs-1{list-style-type:none}ul.lst-kix_ihy7hfh3ag55-4{list-style-type:none}ul.lst-kix_3g3h5y526gvs-2{list-style-type:none}ul.lst-kix_3g3h5y526gvs-0{list-style-type:none}.lst-kix_3g3h5y526gvs-1>li:before{content:"\0025cb  "}.lst-kix_3g3h5y526gvs-2>li:before{content:"\0025a0  "}.lst-kix_3g3h5y526gvs-3>li:before{content:"\0025cf  "}ul.lst-kix_ihy7hfh3ag55-5{list-style-type:none}ul.lst-kix_ihy7hfh3ag55-6{list-style-type:none}ul.lst-kix_ihy7hfh3ag55-7{list-style-type:none}ul.lst-kix_ihy7hfh3ag55-8{list-style-type:none}.lst-kix_3g3h5y526gvs-7>li:before{content:"\0025cb  "}.lst-kix_akdjis5omncr-7>li:before{content:"\0025cb  "}.lst-kix_akdjis5omncr-6>li:before{content:"\0025cf  "}.lst-kix_akdjis5omncr-8>li:before{content:"\0025a0  "}.lst-kix_akdjis5omncr-4>li:before{content:"\0025cb  "}.lst-kix_akdjis5omncr-5>li:before{content:"\0025a0  "}.lst-kix_akdjis5omncr-0>li:before{content:"\0025cf  "}.lst-kix_ihy7hfh3ag55-4>li:before{content:"\0025cb  "}.lst-kix_ihy7hfh3ag55-5>li:before{content:"\0025a0  "}.lst-kix_ihy7hfh3ag55-6>li:before{content:"\0025cf  "}.lst-kix_akdjis5omncr-3>li:before{content:"\0025cf  "}.lst-kix_ihy7hfh3ag55-7>li:before{content:"\0025cb  "}.lst-kix_akdjis5omncr-1>li:before{content:"\0025cb  "}.lst-kix_akdjis5omncr-2>li:before{content:"\0025a0  "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_ihy7hfh3ag55-8>li:before{content:"\0025a0  "}ol{margin:0;padding:0}table td,table th{padding:0}.c7{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c36{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:523pt;border-top-color:#000000;border-bottom-style:solid}.c4{margin-left:36pt;padding-top:10pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c27{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Open Sans";font-style:normal}.c24{color:#999999;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Economica";font-style:normal}.c9{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c8{padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left;height:11pt}.c12{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left;height:11pt}.c1{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Consolas";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c34{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c14{padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c21{color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c32{color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Consolas";font-style:normal}.c35{color:#333333;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left;height:11pt}.c28{padding-top:6pt;padding-bottom:0pt;line-height:1.5;text-align:left}.c6{border-spacing:0;border-collapse:collapse;margin-right:auto}.c18{font-size:30pt;font-family:"Ubuntu";color:#000000;font-weight:400}.c20{padding-top:10pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c31{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c16{font-family:"Consolas";color:#ffffff;font-weight:400}.c29{margin-left:36pt;padding-left:0pt}.c5{font-size:12pt;font-weight:700}.c22{padding:0;margin:0}.c17{font-family:"Consolas";color:#00ff00}.c19{orphans:2;widows:2}.c25{color:#ffffff}.c13{font-size:12pt}.c10{height:0pt}.c30{background-color:#ff0000}.c23{height:11pt}.c26{margin-left:-0.8pt}.c11{background-color:#333333}.c33{font-weight:400}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c31 doc-content"><p class="c15 c26 subtitle" id="h.vb8p0lepu9vn"><span class="c18">Pr&agrave;ctica NFS/Samba</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 4.00px;"><img alt="" src="images/image2.png" style="width: 601.70px; height: 4.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="horizontal line"></span></p><p class="c19 c23 c26 c28"><span class="c27"></span></p><p class="c14"><span class="c2">En una empresa volem donar acc&eacute;s als usuaris a certes carpetes d&rsquo;un servidor amb Debian Linux.</span></p><p class="c14"><span class="c13">L&rsquo;empresa t&eacute; els departaments de </span><span class="c5">direcci&oacute;</span><span class="c13">, </span><span class="c5">compres</span><span class="c13">, </span><span class="c5">vendes</span><span class="c13">&nbsp;i </span><span class="c5">desenvolupament</span><span class="c2">.</span></p><p class="c14"><span class="c13">Al departament de </span><span class="c5">desenvolupament</span><span class="c2">&nbsp;treballen tres persones: el Joan, el Toni i la Cristina.</span></p><p class="c14"><span class="c13">Al departament de </span><span class="c5">compres</span><span class="c13">&nbsp;nom&eacute;s hi ha el Pau, a </span><span class="c5">vendes</span><span class="c13">&nbsp;la Roser i el Jordi i a </span><span class="c5">direcci&oacute;</span><span class="c2">&nbsp;el Marcel (que &eacute;s el director) i la Carme.</span></p><p class="c14"><span class="c2">Cada departament es troba en una subxarxa com s&rsquo;indica a continuaci&oacute;:</span></p><ul class="c22 lst-kix_akdjis5omncr-0 start"><li class="c4 li-bullet-0"><span class="c2">Desevolupament: 192.168.1.0/24</span></li><li class="c4 li-bullet-0"><span class="c2">Compres: 192.168.2.0/24</span></li><li class="c4 li-bullet-0"><span class="c2">Vendes: 192.168.3.0/24</span></li><li class="c4 li-bullet-0"><span class="c2">Direcci&oacute;: 192.168.4.0/24</span></li></ul><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">1.- Instal&middot;la el necessari per tenir el servei NFS a la m&agrave;quina Debian. &nbsp;Indica com reinicies el servei NFS i mostra que s&rsquo;est&agrave; executant (mostra que el servei escolta en el port corresponent i que el seu estat &eacute;s actiu). Quin port utilitza el servei NFS?</span></p><p class="c12"><span class="c2"></span></p><p class="c12"><span class="c2"></span></p><a id="t.f08643465bf74e86f13be1d53d6b5d58e2d23d39"></a><a id="t.0"></a><table class="c6"><tr class="c10"><td class="c11 c36" colspan="1" rowspan="1"><p class="c14"><span class="c9"># Instal&middot;lem el servei NFS</span></p><p class="c14"><span class="c1">$ sudo apt install nfs-kernel-server</span></p><p class="c8"><span class="c9"></span></p><p class="c14"><span class="c9"># Reiniciem el servei NFS amb:</span></p><p class="c14"><span class="c1">$ sudo systemctl restart nfs-kernel-server.service</span></p><p class="c8"><span class="c9"></span></p><p class="c14"><span class="c25 c13"># Per demostrar que s&rsquo;est&agrave; executant el servei (que est&agrave; actiu):</span></p><p class="c14"><span class="c1">$ sudo systemctl status nfs-kernel-server.service</span></p><p class="c20 c19"><span class="c17 c13 c33">&#9679;</span><span class="c1">&nbsp;nfs-server.service - NFS server and services</span></p><p class="c20 c19"><span class="c1">&nbsp; &nbsp;Loaded: loaded (/lib/systemd/system/nfs-server.service; enabled; vendor preset: enabled)</span></p><p class="c20 c19"><span class="c16 c13">&nbsp; &nbsp;Active: </span><span class="c5 c17">active</span><span class="c17 c13 c33">&nbsp;(exited)</span><span class="c1">&nbsp;since Sat 2019-04-20 18:08:34 CEST; 1min 34s ago</span></p><p class="c20 c19"><span class="c1">&nbsp; Process: 4622 ExecStopPost=/usr/sbin/exportfs -f (code=exited, status=0/SUCCESS)</span></p><p class="c20 c19"><span class="c1">&nbsp; Process: 4621 ExecStopPost=/usr/sbin/exportfs -au (code=exited, status=0/SUCCESS)</span></p><p class="c20 c19"><span class="c1">&nbsp; Process: 4620 ExecStop=/usr/sbin/rpc.nfsd 0 (code=exited, status=0/SUCCESS)</span></p><p class="c20 c19"><span class="c1">&nbsp; Process: 4630 ExecStart=/usr/sbin/rpc.nfsd $RPCNFSDARGS (code=exited, status=0/SUCCESS)</span></p><p class="c20 c19"><span class="c1">&nbsp; Process: 4629 ExecStartPre=/usr/sbin/exportfs -r (code=exited, status=0/SUCCESS)</span></p><p class="c19 c20"><span class="c1">&nbsp;Main PID: 4630 (code=exited, status=0/SUCCESS)</span></p><p class="c20 c19 c23"><span class="c1"></span></p><p class="c20 c19"><span class="c9"># Per veure el port on escolta el servei NFS.</span></p><p class="c20 c19"><span class="c1">$ ss -ta</span></p><p class="c20 c19"><span class="c1">State &nbsp; &nbsp; Recv-Q &nbsp; &nbsp; Send-Q &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Local Address:Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Peer Address:Port</span></p><p class="c3 c19"><span class="c16 c13 c30">LISTEN &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:nfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* </span><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c3 c19"><span class="c1">LISTEN &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:44165 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c3 c19"><span class="c1">LISTEN &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:ldap &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c20 c19"><span class="c1">&hellip;</span></p><p class="c20 c19 c23"><span class="c1"></span></p><p class="c20 c19"><span class="c1">$ ss -tan</span></p><p class="c15"><span class="c1">State &nbsp; &nbsp; Recv-Q &nbsp; &nbsp; Send-Q &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Local Address:Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Peer Address:Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c15"><span class="c16 c13 c30">LISTEN &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:2049 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; </span><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c15"><span class="c1">LISTEN &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:44165 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c15"><span class="c1">LISTEN &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:389 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c20 c19 c23"><span class="c1"></span></p><p class="c20 c19"><span class="c13 c25"># Els anteriors resultats demostren que el port on escolta el servei NFS &eacute;s el </span><span class="c5 c25">2049</span><span class="c9">.</span></p></td></tr></table><p class="c12"><span class="c2"></span></p><p class="c8"><span class="c13 c32"></span></p><p class="c14"><span class="c13">2.- Configura el servidor per permetre que els usuaris del departament de desenvolupament puguin accedir per NFS a la carpeta </span><span class="c5">devel</span><span class="c2">&nbsp;del servidor en mode lectura/escriptura i la resta de departaments nom&eacute;s en mode lectura. &nbsp;Quin canvi faries a la configuraci&oacute; del servidor NFS per tal de permetre que un departament pugui escriure?</span></p><p class="c12"><span class="c2"></span></p><a id="t.4e8286a85abf7ec2f185dfd45d5c3264201687d3"></a><a id="t.1"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Hem de crear primer la carpeta /devel</span></p><p class="c3"><span class="c1 c11">$ sudo mkdir /devel</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># Creem els usuaris que necessitem del departament desenvolupament (Nota: tamb&eacute; es poden crear a LDAP)</span></p><p class="c3"><span class="c1 c11">$ sudo adduser joan</span></p><p class="c3"><span class="c1 c11">$ sudo adduser toni</span></p><p class="c3"><span class="c1 c11">$ sudo adduser cristina</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># Creem el grup desenvolupament</span></p><p class="c3"><span class="c1 c11">$ sudo addgroup desenvolupament</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># Fem que els usuaris del departament desenvolupament pertanyin al grup del mateix nom:</span></p><p class="c3"><span class="c1 c11">$ sudo adduser joan desenvolupament</span></p><p class="c3"><span class="c1 c11">$ sudo adduser toni desenvolupament</span></p><p class="c3"><span class="c1 c11">$ sudo adduser cristina desenvolupament</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c25 c13 c11"># Fem que </span><span class="c5 c25 c11">desenvolupament</span><span class="c9 c11">&nbsp;sigui el grup propietari de /devel i li donem permisos d&rsquo;escriptura</span></p><p class="c3"><span class="c1 c11">$ sudo chown :desenvolupament /devel</span></p><p class="c3"><span class="c1 c11">$ sudo chmod g+w /devel</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">(repetim el mateix amb els usuaris del grup vendes, compres i direccio).</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># Fitxer /etc/exports (tot en una sola l&iacute;nia)</span></p><p class="c3"><span class="c1 c11">/devel 192.168.1.0/24(rw,sync,no_subtree_check) 192.168.2.0/24(ro,sync,no_subtree_check) 192.168.3.0/24(ro,sync,no_subtree_check) 192.168.4.0/24(ro,sync,no_subtree_check)</span></p><p class="c0"><span class="c9 c11"></span></p></td></tr></table><p class="c12"><span class="c2"></span></p><a id="t.8c490a8a98c86dd3565c4822ab7113a8be56e327"></a><a id="t.2"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c14"><span class="c1"># Reiniciem el servei</span></p><p class="c14"><span class="c1">$ sudo systemctl restart nfs-kernel-server.service </span></p><p class="c8"><span class="c1"></span></p><p class="c14"><span class="c9">Si hem de permetre a un altre departament que pugui escriure a /devel, haurem de fer que el grup propietari de la carpeta /devel sigui diferent a desenvolupament (per exemple desenv2) i fer que tots els usuaris dels departaments que hagin de poder escriure a /devel estiguin dins del grup desenv2.</span></p><p class="c14"><span class="c25 c13">A continuaci&oacute;, hem de modificar la l&iacute;nia del /etc/exports referent a la xarxa espec&iacute;fica del departament que ha de poder escriure i posar </span><span class="c16 c13">rw</span><span class="c25 c13">&nbsp;en comptes de </span><span class="c16 c13">ro</span><span class="c9">.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Detalla la configuraci&oacute; del servidor i els clients que necessites perqu&egrave; es munti autom&agrave;ticament la carpeta en xarxa per NFS.</span></p><p class="c12"><span class="c2"></span></p><a id="t.73bb118ef90d9ee57c6e6b9f205a3136fa5e98cd"></a><a id="t.3"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c14"><span class="c9">Al servidor ja ho hem explicat abans amb el fitxer /etc/exports i els permisos de la carpeta.</span></p><p class="c14"><span class="c9">Al client haurem de posar al fitxer /etc/fstab una l&iacute;nia com la seg&uuml;ent:</span></p><p class="c14"><span class="c1">192.168.1.2:/devel /devel nfs rw 0 0</span></p><p class="c14"><span class="c25 c13">On </span><span class="c13 c16">192.168.1.2</span><span class="c25 c13">&nbsp;&eacute;s la IP del servidor NFS, i el segon</span><span class="c16 c13">&nbsp;/devel</span><span class="c9">&nbsp;que apareix &eacute;s el punt de muntatge del client.</span></p><p class="c14"><span class="c9">A m&eacute;s, hem de tenir present que el uid num&eacute;ric de l&rsquo;usuari al servidor i al client ha de ser el mateix. El millor per a assegurar-lo &eacute;s fer servir LDAP.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c13">3.- La Cristina utilitza tamb&eacute; una m&agrave;quina Windows 10 per accedir a la carpeta </span><span class="c5">devel</span><span class="c2">&nbsp;en mode lectura/escriptura.</span></p><p class="c14"><span class="c2">Instal&middot;la el servei Samba al servidor per tal de permetre que pugui accedir.</span></p><p class="c12"><span class="c2"></span></p><a id="t.670a1c940de481f38d1faab854abf8872a245543"></a><a id="t.4"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c1 c11">$ sudo apt install samba</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Fes la configuraci&oacute; del servidor suposant que potser m&eacute;s endavant, els altres usuaris del departament de desenvolupament tamb&eacute; hauran de poder accedir amb els mateixos permisos que tenen amb NFS.</span></p><p class="c12"><span class="c2"></span></p><a id="t.e9b41ae6dbd134139eb93922a7c5384b8a40c1cc"></a><a id="t.5"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Creem els usuaris del grup desenvolupament a Samba</span></p><p class="c0"><span class="c9 c11"></span></p><p class="c3"><span class="c1 c11">$ sudo smbpasswd -a cristina</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># En previsi&oacute; de que m&eacute;s endavant vulguin accedir tamb&eacute; els altres usuaris del departament de desevolupament, creem tamb&eacute; els seus usuaris:</span></p><p class="c3"><span class="c1 c11">$ sudo smbpasswd -a joan</span></p><p class="c3"><span class="c1 c11">$ sudo smbpasswd -a toni</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># Nota: Hem de tenir creat (quan hem fet l&rsquo;apartat del NFS) un grup per al seu departament i hem de tenir afegits a tots tres al grup.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Detalla la configuraci&oacute; del servidor.</span></p><p class="c12"><span class="c2"></span></p><a id="t.4af330cb171876fc62ae7d9de452992448b6a463"></a><a id="t.6"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Creem un nou fitxer /etc/samba/smb.conf o afegim al final del ja existent el seg&uuml;ent contingut:</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[devel]</span></p><p class="c3"><span class="c1 c11">path = /devel</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">valid users &nbsp;= @desenvolupament @compres @vendes @direccio</span></p><p class="c3"><span class="c1 c11">write list = @desenvolupament</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># L&rsquo;anterior contingut presuposa que s&rsquo;han donat d&rsquo;alta tots els usuaris i grups de l&rsquo;empresa.</span></p><p class="c3"><span class="c9 c11"># Aconseguim que tots els usuaris puguin accedir en mode lectura per&ograve; nom&eacute;s els usuaris del departament desenvolupament podran escriure.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c13">Mostra com veuria un client del departament de desenvolupament la seva m&agrave;quina Windows amb la carpeta </span><span class="c5">devel</span><span class="c2">&nbsp;accesible des de la seva m&agrave;quina.</span></p><p class="c8"><span class="c2"></span></p><p class="c12"><span class="c2"></span></p><a id="t.9cfb24a2e915c3d1e586889b056c906b13b97bdd"></a><a id="t.7"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11">#A continuaci&oacute; mostrem com veuria Cristina la carpeta muntada i amb una subcarpeta que ha pogut crear per tenir permisos d&rsquo;escriptura i lectura. Tamb&eacute; hem posat la carptura de com la veuria Toni del mateix departament.</span></p></td></tr></table><p class="c8"><span class="c27"></span></p><p class="c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 452.00px;"><img alt="" src="images/image3.png" style="width: 601.70px; height: 452.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Com a Toni:</span></p><p class="c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 409.33px;"><img alt="" src="images/image6.png" style="width: 601.70px; height: 409.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c14"><span class="c2">4.- El servidor Samba nom&eacute;s pot deixar accedir a m&agrave;quines de les xarxes locals on estan els departaments:</span></p><ul class="c22 lst-kix_akdjis5omncr-0"><li class="c4 li-bullet-0"><span class="c2">Desevolupament: 192.168.1.0/24</span></li><li class="c4 li-bullet-0"><span class="c2">Compres: 192.168.2.0/24</span></li><li class="c4 li-bullet-0"><span class="c2">Vendes: 192.168.3.0/24</span></li><li class="c4 li-bullet-0"><span class="c2">Direcci&oacute;: 192.168.4.0/24</span></li></ul><p class="c14"><span class="c13">A m&eacute;s, el servidor ha de poder ser trobat a la xarxa local amb el nom: </span><span class="c5">ServidorDocs</span><span class="c2">.</span></p><p class="c14"><span class="c2">Indica la configuraci&oacute; que has de fer i quins serveis has de reiniciar per fer-la efectiva.</span></p><p class="c12"><span class="c2"></span></p><a id="t.21e8ac409535122699ece479f197565723f28f44"></a><a id="t.8"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Creem un nou fitxer /etc/samba/smb.conf o afegim al final del ja existent el seg&uuml;ent contingut:</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[global]</span></p><p class="c3"><span class="c1 c11">hosts allow = 192.168.1.0/24 192.168.2.0/24 192.168.3.0/24 192.168.4.0/24</span></p><p class="c3"><span class="c1 c11">netbios name = ServidorDocs</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[devel]</span></p><p class="c3"><span class="c1 c11">path = /devel</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">valid users &nbsp;= @desenvolupament @compres @vendes @direccio</span></p><p class="c3"><span class="c1 c11">write list = @desenvolupament</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c9 c11"># A continuaci&oacute; hem de reiniciar tant el servei de compartici&oacute; de carpetes com el de noms</span></p><p class="c3"><span class="c1 c11">$ sudo systemctl restart smbd.service</span></p><p class="c3"><span class="c1 c11">$ sudo systemctl restart nmbd.service</span></p><p class="c0"><span class="c9 c11"></span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">5.- Mostra la configuraci&oacute; del servidor Samba per afegir la resta d&rsquo;usuaris:</span></p><ul class="c22 lst-kix_3g3h5y526gvs-0 start"><li class="c4 li-bullet-0"><span class="c13">La carpeta </span><span class="c5">compres</span><span class="c2">&nbsp;haur&agrave; de ser accessible nom&eacute;s per al departament de compres i en mode lectura/escriptura.</span></li><li class="c4 li-bullet-0"><span class="c13">La carpeta </span><span class="c5">vendes</span><span class="c2">&nbsp;haur&agrave; de ser accessible en mode lectura/escriptura nom&eacute;s per al departament de Vendes, excepte per al Jordi que nom&eacute;s tindr&agrave; perm&iacute;s de lectura.</span></li><li class="c4 li-bullet-0"><span class="c13">La carpeta </span><span class="c5">direccio</span><span class="c2">&nbsp;haur&agrave; de ser accessible tans sols per als membres del departament Direcci&oacute; i en mode nom&eacute;s lectura. El Marcel, de forma excepcional, ser&agrave; l&rsquo;&uacute;nic que hi podr&agrave; escriure.</span></li></ul><p class="c8"><span class="c2"></span></p><p class="c12"><span class="c2"></span></p><a id="t.f5b992cda002d28ff57b564ebd6dd21c3210ec50"></a><a id="t.9"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Creem un nou fitxer /etc/samba/smb.conf o afegim al final del ja existent el seg&uuml;ent contingut:</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[global]</span></p><p class="c3"><span class="c1 c11">hosts allow = 192.168.1.0/24 192.168.2.0/24 192.168.3.0/24 192.168.4.0/24</span></p><p class="c3"><span class="c1 c11">netbios name = ServidorDocs</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[devel]</span></p><p class="c3"><span class="c1 c11">path = /devel</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">valid users &nbsp;= @desenvolupament @compres @vendes @direccio</span></p><p class="c3"><span class="c1 c11">write list = @desenvolupament</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[compres]</span></p><p class="c3"><span class="c1 c11">path = /compres</span></p><p class="c3"><span class="c1 c11">valid users = @compres</span></p><p class="c3"><span class="c1 c11">read only = no</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[vendes]</span></p><p class="c3"><span class="c1 c11">path = /vendes</span></p><p class="c3"><span class="c1 c11">valid users = @vendes</span></p><p class="c3"><span class="c1 c11">read only = no</span></p><p class="c3"><span class="c1 c11">read list = jordi</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[direccio]</span></p><p class="c3"><span class="c1 c11">path = /direccio</span></p><p class="c3"><span class="c1 c11">valid users = @direccio</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">write list = marcel</span></p><p class="c0"><span class="c9 c11"></span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Nota 1: Mira de fer servir grups.</span></p><p class="c14"><span class="c2">Nota 2: Mostra tant la configuraci&oacute; del servei com els usuaris/grups creats.</span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">6.- Tenim una impressora HP LaserJet 5200 PS sense tarja de xarxa per&ograve; volem connectar-la a la xarxa perqu&egrave; es pugui imprimir des de qualsevol departament.</span></p><p class="c14"><span class="c2">Indica quina configuraci&oacute; faries al servidor i mostra com es veuria des d&rsquo;un client Windows un cop configurada a la m&agrave;quina client.</span></p><p class="c12"><span class="c2"></span></p><a id="t.add7bf69cd0dc7a82805e3629a12117847791a44"></a><a id="t.10"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Afegim a /etc/samba/smb.conf el seg&uuml;ent contingut:</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[global]</span></p><p class="c3"><span class="c1 c11">hosts allow = 192.168.1.0/24 192.168.2.0/24 192.168.3.0/24 192.168.4.0/24</span></p><p class="c3"><span class="c1 c11">netbios name = ServidorDocs</span></p><p class="c3"><span class="c1 c11">load printers = no</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[devel]</span></p><p class="c3"><span class="c1 c11">path = /devel</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">valid users &nbsp;= @desenvolupament @compres @vendes @direccio</span></p><p class="c3"><span class="c1 c11">write list = @desenvolupament</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[compres]</span></p><p class="c3"><span class="c1 c11">path = /compres</span></p><p class="c3"><span class="c1 c11">valid users = @compres</span></p><p class="c3"><span class="c1 c11">read only = no</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[vendes]</span></p><p class="c3"><span class="c1 c11">path = /vendes</span></p><p class="c3"><span class="c1 c11">valid users = @vendes</span></p><p class="c3"><span class="c1 c11">read only = no</span></p><p class="c3"><span class="c1 c11">read list = jordi</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[direccio]</span></p><p class="c3"><span class="c1 c11">path = /direccio</span></p><p class="c3"><span class="c1 c11">valid users = @direccio</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">write list = marcel</span></p><p class="c0"><span class="c9 c11"></span></p><p class="c3"><span class="c1 c11">[printers]</span></p><p class="c3"><span class="c1 c11">comment = All Printers</span></p><p class="c3"><span class="c1 c11">browseable = no</span></p><p class="c3"><span class="c1 c11">path = /var/spool/samba</span></p><p class="c3"><span class="c1 c11">printable = yes</span></p><p class="c3"><span class="c1 c11">guest ok = no</span></p><p class="c3"><span class="c1 c11">read only = yes</span></p><p class="c3"><span class="c1 c11">create mask = 0700</span></p><p class="c0"><span class="c1 c11"></span></p><p class="c3"><span class="c1 c11">[HPLaserJet5200PS]</span></p><p class="c3"><span class="c1 c11">printable = yes</span></p><p class="c3"><span class="c1 c11">path = /var/spool/samba</span></p><p class="c0"><span class="c9 c11"></span></p><p class="c0"><span class="c9 c11"></span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 509.50px; height: 388.59px;"><img alt="" src="images/image1.png" style="width: 509.50px; height: 388.59px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Y un cop configurada es veuria aix&iacute;:</span></p><p class="c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 537.50px; height: 427.43px;"><img alt="" src="images/image4.png" style="width: 537.50px; height: 427.43px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">Verifica com es veu des del servei CUPS un document impr&egrave;s a un client.</span></p><p class="c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 329.33px;"><img alt="" src="images/image5.png" style="width: 601.70px; height: 329.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">7.- Indica qu&egrave; ens aporta Samba que no tingui ja NFSv3.</span></p><a id="t.d4cfe8a5a0a3b903e99979bcc1492bcb086947d6"></a><a id="t.11"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># A m&eacute;s de NFS amb Samba podem:</span></p><ul class="c22 lst-kix_ihy7hfh3ag55-0 start"><li class="c3 c29 li-bullet-0"><span class="c9 c11">Compartir impressores</span></li><li class="c3 c29 li-bullet-0"><span class="c9 c11">Fer autenticaci&oacute; per usuari/password sense instal&middot;lar cap servei m&eacute;s</span></li><li class="c3 c29 li-bullet-0"><span class="c9 c11">S&rsquo;integra millor que NFS amb xarxes Windows</span></li></ul></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">8.- Quina difer&egrave;ncia hi ha entre Samba i CIFS?</span></p><a id="t.9474b37ba8115b4075eb4c601800561f1755b737"></a><a id="t.12"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Estrictament, CIFS &eacute;s un protocol (l&rsquo;antic SMB) i Samba &eacute;s una implementaci&oacute; software d&rsquo;aquest protocol.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">9.- Quins serveis has utilitzat a Samba? Per a qu&egrave; serveix cadascun?</span></p><a id="t.5474671dfc5c73e8480a1f99891a35473b89b8e3"></a><a id="t.13"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Necessitem el servei de compartici&oacute; de carpetes (smbd) i el de noms (nmbd), aquest &uacute;ltim per tenir en compte que s&rsquo;ha de difondre el nom del servidor amb la seva IP per la xarxa.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">10.- Quin port utilitza Samba?</span></p><p class="c8"><span class="c2"></span></p><a id="t.dc96d1cd76538cbd82ad68e74a6d94050671d943"></a><a id="t.14"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c9 c11"># Per al servei de compartici&oacute; de carpetes (smbd) es fa servir el port 445 i per al servei de noms (nmbd) el port 139.</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c8"><span class="c2"></span></p><p class="c14"><span class="c2">11.- Quina eina de Samba ens permet comprovar que la sintaxi del fitxer de configuraci&oacute; sigui la correcta abans de reiniciar el servei?</span></p><p class="c8"><span class="c2"></span></p><a id="t.31c1d3d3525a2dd823775196693c007e735af9e5"></a><a id="t.15"></a><table class="c6"><tr class="c10"><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c1 c11">$ testparm</span></p></td></tr></table><p class="c8"><span class="c2"></span></p><p class="c8"><span class="c13 c33 c35"></span></p><p class="c0 c19"><span class="c33 c34"></span></p></body></html>